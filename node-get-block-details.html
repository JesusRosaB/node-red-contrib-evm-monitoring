<!--
  ***************************************************************
  *  node-red-contrib-evm-monitoring                            *
  *  JesÃºs Rosa Bilbao (jesus.rosa@uca.es) &                    *
  *  Juan Boubeta Puig (juan.boubeta@uca.es)                    *
  *  University of Cadiz                                        *
  *                                                             *
  ***************************************************************
-->
<script type="text/javascript">

  RED.nodes.registerType('get-block-details', {
    category: 'EVM',
    color: '#7eafd2',
    defaults: {
      name: { value: undefined },
      evmblockchainconfig: { type: 'evm-blockchain-config', required: true },
      detail: { value: undefined}
    },
    inputs: 1,
    outputs: 1,
    icon: 'Ethereum_logo.png',
    align: 'left',
    paletteLabel: 'get-block-details',
    hasValue: true,
    label: function() {
      return this.name || 'Get Block Details';
    }
  });
</script>
<style>
  h4.section {
    border-bottom: 1px solid #bbb;
    margin: 1em 0em 1em 0em;
  }
</style>
<script type="text/x-red" data-template-name="get-block-details">
    <h4 class="section">General</h4>

    <div class="form-row">
        <label for="node-input-name"> Name [optional]</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    
    <h4 class="section">EVM</h4>
    <div class="form-row">
        <label for="node-input-evmblockchainconfig"> Configuration </label>
        <input type="text" id="node-input-evmblockchainconfig">
    </div>

    <h4 class="section">What detail do you want to obtain?</h4>
    <div class="form-row">
        <label for="node-input-detail"> Detail </label>
        <select id="node-input-detail">
          <option value="difficulty">Difficulty</option>
          <option value="extradata">Extra Data</option>
          <option value="gaslimit">Gas Limit</option>
          <option value="gasused">Gas Used</option>
          <option value="hash">Hash</option>
          <option value="logsbloom">Logs Bloom</option>
          <option value="miner">Miner</option>
          <option value="mixhash">Mix Hash</option>
          <option value="nonce">Nonce</option>
          <option value="number">Number</option>
          <option value="parenthash">Parent Hash</option>
          <option value="receiptsroot">Receipts Root</option>
          <option value="sha3uncles">Sha3 Uncles</option>
          <option value="size">Size</option>
          <option value="stateRoot">State Root</option>
          <option value="timestamp">Timestamp</option>
          <option value="totaldifficulty">Total Difficulty</option>
          <option value="transactions">Transactions</option>
          <option value="transactionsroot">Transactions Root</option>
          <option value="uncles">Uncles</option>
          <option value="withdrawals">Withdrawals</option>
          <option value="withdrawalsroot">Withdrawals Root</option>
          <option value="alldetails">All Details</option>
        </select>
    </div>
</script>

<script type="text/html" data-help-name="get-block-details">
  <p>Allows to obtain specific information of a block from its hash or number within the EVM blockchain network specified in the configuration.</p>
  <ul>
    <li><b>Input: </b>Block hash or block number to get the desired detail.</li>
    <li><b>EVM Configuration:</b> Select the configuration node where the network is specified.</li>
    <li><b>Detail:</b>Select the information you wish to obtain from the blocks provided.</li>
    <li><b>Output:</b>Result of get block details process. If the query has been successful, then the detail selected will be displayed. It is placed on <code>msg.payload</code>.</li>
  </ul>
  </script>